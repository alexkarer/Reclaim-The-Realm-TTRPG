<div class="mx-2">
    <app-dynamic-content [content]="weaponRulesJson.weaponsDescription | keywordProcessor"></app-dynamic-content>
    <h4 class="mb-1 mt-2">Weapon Proficiency</h4>
    <app-dynamic-content [content]="weaponRulesJson.weaponProficiencyDescription | keywordProcessor"></app-dynamic-content>
    <ul>
        @for (weaponRank of weaponRulesJson.weaponProficiencyRanks; track $index) {
            <li>
                <span class="fw-bold">{{ weaponRank.rank + ': ' }}</span>
                <app-dynamic-content [content]="weaponRank.description | keywordProcessor"></app-dynamic-content>
            </li>
        }
    </ul>

    <h4 class="mb-1 mt-2" ngbScrollSpyFragment="weapon-properties">Weapon Properties</h4>
    @for (weaponProperty of weaponRulesJson.weaponProperties; track $index) {
        <h5 class="mt-2 mb-0">{{ weaponProperty.name }}</h5>
        <app-dynamic-content [content]="weaponProperty.description | keywordProcessor"></app-dynamic-content>
    }

    <h4 class="mb-1 mt-2">Weapon Quality</h4>
    <app-dynamic-content [content]="weaponRulesJson.weaponQuality.weaponQualityDescription | keywordProcessor"></app-dynamic-content>
    <div class="mt-2 d-flex justify-content-center">
        <table class="rules-table-50">
            <thead>
                <tr>
                    <th scope="col">Quality</th>
                    <th scope="col">Modifier</th>
                    <th scope="col">Price</th>
                </tr>
            </thead>
            <tbody>
                @for (weaponQuality of weaponRulesJson.weaponQuality.weaponQualities; track $index) {
                    <tr>
                        <td>{{ weaponQuality.quality }}</td>
                        <td><app-dynamic-content [content]="weaponQuality.modifier  | keywordProcessor"></app-dynamic-content></td>
                        <td>{{ weaponQuality.price }}</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>


    <h4 class="mb-1 mt-2">Simple Weapons</h4>
    <div class="d-flex justify-content-center">
        <table class="rules-table-75">
            <thead>
                <tr>
                    <th scope="col">Weapon</th>
                    <th scope="col">Tier</th>
                    <th scope="col">Damage</th>
                    <th scope="col">Properties</th>
                    <th scope="col">Weight</th>
                    <th scope="col">Cost</th>
                </tr>
            </thead>
            <tbody>
                @for (weapon of simpleWeapons; track $index) {
                    <tr>
                        <td>{{ weapon.name }}</td>
                        <td>{{ weapon.tier }}</td>
                        <td><app-dynamic-content [content]=" weapon.getPrettyDamageString() | keywordProcessor"></app-dynamic-content></td>
                        <td><app-dynamic-content [content]="weapon.properties | weaponPropertyProcessor"></app-dynamic-content></td>
                        <td>{{ weapon.getPrettyWeightString() }}</td>
                        <td>{{ weapon.cost.getPrettyString() }}</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <h4 class="mb-1 mt-2">Advanced Weapons</h4>
    <div class="d-flex justify-content-center">
        <table class="rules-table-75">
            <thead>
                <tr>
                    <th scope="col">Weapon</th>
                    <th scope="col">Tier</th>
                    <th scope="col">Damage</th>
                    <th scope="col">Properties</th>
                    <th scope="col">Weight</th>
                    <th scope="col">Cost</th>
                </tr>
            </thead>
            <tbody>
                @for (weapon of advancedWeapons; track $index) {
                    <tr>
                        <td>{{ weapon.name }}</td>
                        <td>{{ weapon.tier }}</td>
                        <td><app-dynamic-content [content]=" weapon.getPrettyDamageString() | keywordProcessor"></app-dynamic-content></td>
                        <td><app-dynamic-content [content]="weapon.properties | weaponPropertyProcessor"></app-dynamic-content></td>
                        <td>{{ weapon.getPrettyWeightString() }}</td>
                        <td>{{ weapon.cost.getPrettyString() }}</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
    
    <h4 class="mb-1 mt-2">Ammunitions</h4>
    <app-dynamic-content [content]="ammunitionRulesJson.ammunitionsDescriptions| keywordProcessor"></app-dynamic-content>

    <div class="d-flex justify-content-center">
        <table class="rules-table">
            <thead>
                <tr>
                    <th scope="col">Weapon</th>
                    <th scope="col">Ammunition Description</th>
                    <th scope="col">Available Weapons</th>
                    <th scope="col">Weight</th>
                    <th scope="col">Cost</th>
                    <th scope="col">Recoverable</th>
                </tr>
            </thead>
            <tbody>
                @for (ammunition of ammunitions; track $index) {
                    <tr>
                        <td>{{ ammunition.name }}</td>
                        <td><app-dynamic-content [content]="ammunition.description| keywordProcessor"></app-dynamic-content></td>
                        <td>{{ ammunition.availibleWeapons }}</td>
                        <td>{{ ammunition.getPrettyWeightString() }}</td>
                        <td>{{ ammunition.cost.getPrettyString() }}</td>
                        <td>{{ ammunition.recoverable ? 'yes' : 'no' }}</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <h5 class="mb-1 mt-2">Ammunitions Quality</h5>
    <app-dynamic-content [content]="ammunitionRulesJson.ammunitionsQuality.ammunitionsQualityDescription | keywordProcessor"></app-dynamic-content>
    <div class="mt-2 d-flex justify-content-center">
        <table class="rules-table-50">
            <thead>
                <tr>
                    <th scope="col">Quality</th>
                    <th scope="col">Modifier</th>
                    <th scope="col">Price</th>
                </tr>
            </thead>
            <tbody>
                @for (ammunitionsQuality of ammunitionRulesJson.ammunitionsQuality.ammunitionQualities; track $index) {
                    <tr>
                        <td>{{ ammunitionsQuality.quality }}</td>
                        <td><app-dynamic-content [content]="ammunitionsQuality.modifier  | keywordProcessor"></app-dynamic-content></td>
                        <td>{{ ammunitionsQuality.price }}</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>