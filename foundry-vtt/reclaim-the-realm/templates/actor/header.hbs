{{! Sheet Header }}
<header class='sheet-header'>
  <img
    class='profile-img'
    src='{{actor.img}}'
    data-edit='img'
    data-action='onEditImage'
    title='{{actor.name}}'
    height='100'
    width='100'
  />
  <div class='header-fields'>
    <div class='document-name flexrow' style="margin-bottom: 5px;">
      <input
        style='margin-right: 1em;'
        name='name'
        type='text'
        value='{{actor.name}}'
        placeholder='Name'
      />
      <!-- TODO: Change to XP / CR counter for players can use gauge again -->
      {{#if (eq actor.type 'character')}}
      <div class='resource flexrow'>
        <span id='system.xp'>{{localize 'RTR.Actor.Character.FIELDS.xp.label'}}: {{system.xp.total}}/{{system.xp.nextMilestone}}</span>
        <meter 
          class='resource-gauge resource-guage-gold'
          style="flex-grow: 2;"
          value='{{system.xp.total}}'
          min='{{system.xp.prevMilestone}}'
          max='{{system.xp.nextMilestone}}'
        ></meter>
      </div>
      {{/if}}

      {{#if (eq actor.type 'npc')}}
      <div class='resource flex-group-center'>
          <label class='resource-label'>
            {{localize 'RTR.Actor.NPC.FIELDS.cr.label'}} / {{localize 'RTR.Actor.NPC.xp.label'}}
          </label>
          <div class='resource-content flexrow flex-center flex-between'>
            <input
              type='text'
              name='system.cr'
              value='{{system.cr}}'
              data-dtype='Number'
            />
            <span></span>
            <input
              type='text'
              disabled='true'
              name='system.xp'
              value='{{system.xp}}'
              data-dtype='Number'
            />
          </div>
      </div>
      {{/if}}
    </div>

    <div class='levels flexrow flex-group-center' style="margin-bottom: 5px;">
      <label class='resource-label'>
          {{localize 'RTR.Actor.base.FIELDS.levels.level.label'}}: {{system.levels.level}} 
      </label>
      <label class='resource-label'>
          {{localize 'RTR.Actor.base.FIELDS.levels.martialLevel.label'}}: {{system.levels.martialLevel}} 
      </label>
      <label class='resource-label'>
          {{localize 'RTR.Actor.base.FIELDS.levels.spellLevel.label'}}: {{system.levels.spellLevel}} 
      </label>
    </div>

    <div class='resources flex-around flexrow' style="margin-bottom: 5px;">

      <div class='resource-group flex-group-center'>
        <div class="flexrow flex-group-center">
          <label for='system.hp' class='resource-label'>
            {{localize 'RTR.Actor.base.FIELDS.hp.value.label'}}
          </label>
          <div class='resource-content'>
            <span id='system.hp'>{{system.hp.value}}/{{system.hp.max}}</span>
          </div>
        </div>
        <div class='resource-content flexrow flex-center'>
          <a class="resource-btn" data-action='decreaseHp'>-</a>
          <meter 
            class='resource-gauge resource-guage-red'
            value='{{system.hp.value}}'
            max='{{system.hp.max}}'
            low='{{divideCeil system.hp.max 5}}'
          ></meter>
          <a class="resource-btn" data-action='increaseHp'>+</a>
        </div>
      </div>

      <!-- TODO: add Temp HP -->

      {{#if (eq actor.type 'character')}}
        <div class='resource-group flex-group-center'>
          <div class="flexrow flex-group-center">
            <label for='system.stamina' class='resource-label'>
              {{localize 'RTR.Actor.base.FIELDS.stamina.value.label'}}
            </label>
            <div class='resource-content'>
              <span id='system.stamina'>{{system.stamina.value}}/{{system.stamina.max}}</span>
            </div>
          </div>
          <div class='resource-content flexrow flex-center'>
            <a class="resource-btn" data-action='decreaseStamina'>-</a>
            <meter
                class='resource-gauge resource-guage-green'
                value='{{system.stamina.value}}'
                max='{{system.stamina.max}}'
                low='{{divideCeil system.stamina.max 5}}'
            ></meter>
            <a class="resource-btn" data-action='increaseStamina'>+</a>
          </div>
        </div>
      {{/if}}

      {{#if (eq actor.type 'character')}}
        <div class='resource-group flex-group-center'>
          <div class="flexrow flex-group-center">
            <label for='system.arcana' class='resource-label'>
              {{localize 'RTR.Actor.base.FIELDS.arcana.value.label'}}
            </label>
            <div class='resource-content'>
              <span id='system.arcana'>{{system.arcana.value}}/{{system.arcana.max}}</span>
            </div>
          </div>
          <div class='resource-content flexrow flex-center'>
            <a class="resource-btn" data-action='decreaseArcana'>-</a>
            <meter
              class='resource-gauge resource-guage-blue'
              value='{{system.arcana.value}}'
              max='{{system.arcana.max}}'
              low='{{divideCeil system.arcana.max 5}}'
            ></meter>
            <a class="resource-btn" data-action='increaseArcana'>+</a>
          </div>
        </div>
      {{/if}}
    </div>
  </div>
  
  <table class="attributes">
      <thead>
        <tr class="flex-group-center">
          {{#each system.attributes as |attribute key|}}
            <th
              class='rollable'
              data-action='roll'
              data-roll='d20+@attributes.{{key}}.value'
              data-label='{{localize (lookup @root.config.attributeAbbreviations key)}}'
            >{{localize (lookup @root.config.attributeAbbreviations key)}}</th>
          {{/each}}
        </tr>
      </thead>
      <tbody>
        <tr class="flex-group-center">
          {{#each system.attributes as |attribute key|}}
            <td
              class='rollable'
              data-action='roll'
              data-roll='d20+@attributes.{{key}}.value'
              data-label='{{localize (lookup @root.config.attributes key)}}'
            >{{numberFormat attribute.value decimals=0}}</td>
          {{/each}}
        </tr>
      </tbody>
    </table>
</header>